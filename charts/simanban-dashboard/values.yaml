# Default values for simanban-dashboard.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 2

# Deployment strategy configuration
deployment:
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
      maxSurge: 1

image:
  repository: registry.home-lab.ir/simanban/admin-front
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: "latest"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

# Health check configuration
healthCheck:
  liveness:
    path: /
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  readiness:
    path: /
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3

service:
  type: ClusterIP
  port: 80
  targetPort: 3000

# Environment variables
env:
  NODE_ENV: "production"
  additional: {}
    # CUSTOM_VAR: "value"

# Environment variables from ConfigMaps or Secrets
envFrom: []
  # - configMapRef:
  #     name: my-config
  # - secretRef:
  #     name: my-secret

# Supabase configuration
supabase:
  # Direct configuration (not recommended for production)
  url: ""
  anonKey: ""
  
  # Use existing secret (recommended)
  existingSecret: ""
  secretKeys:
    url: "supabase-url"
    anonKey: "supabase-anon-key"

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 250m
    memory: 256Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

# Gateway API configuration
gateway:
  enabled: true
  className: "istio"
  hostname: "dashboard.simanban.local"
  # Cert-manager configuration
  certManager:
    enabled: true
    clusterIssuer: "letsencrypt-cloudflare-prod"
  # TLS secret name (will be auto-generated by cert-manager)
  tlsSecretName: "simanban-tls"

# HTTPRoute configuration
httpRoute:
  enabled: true
  hostname: "dashboard.simanban.local"